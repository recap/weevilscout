(function(){var b=YAHOO.util.Dom,a=YAHOO.util.Event;a.onDOMReady(function(){if(BrowserDetect.browser=="Explorer"){swapDivText("center1.inner","This Browser Does not support HTML5!! Known supported browsers are latest releases of Chrome, Firefox and Opera.")}else{var e=new YAHOO.widget.Layout("wrap",{height:b.getClientHeight(),width:b.get("wrap").offsetWidth,units:[{position:"top",height:100,body:"top1",gutter:"1px",collapse:false,resize:false},{position:"bottom",height:50,resize:false,body:"bottom1",gutter:"1px",collapse:false},{position:"center",body:"center1",gutter:"1px"}]});e.on("beforeResize",function(){b.setStyle("wrap","height",b.getClientHeight()+"px");b.setStyle("wrap","width",b.getClientWidth()+"px");if(b.get("centerChild")){var f=b.get("centerChild").offsetWidth-10;var g=b.get("centerChild").offsetHeight-b.get("centerChild").firstChild.offsetHeight-10;b.setStyle("wnetwork","height",g+"px");b.setStyle("wnetwork","width",f+"px");b.setStyle("wedit","height",g+"px");b.setStyle("wedit","width",f+"px");b.setStyle("tab3.center","width",f+"px");b.setStyle("tab3.center","height",g+"px")}});e.on("render",function(){a.onAvailable("center1",function(){var l=document.getElementById("center1");var q=document.createElement("div");var k=document.createElement("div");var h=document.createElement("div");var g=document.body.clientHeight/2-200;var m=document.body.clientHeight/2-300;var n=document.body.clientWidth/2-100;var o=document.body.clientWidth/2+120;var p=document.body.clientWidth/2-650;q.id="joinBtn";q.style.left=n+"px";q.style.top=g+"px";q.style.width="200px";q.style.height="200px";q.style.position="absolute";k.style.top=m+"px";k.style.left=p+"px";k.style.width="500px";k.style.height="370px";k.style.position="absolute";k.innerHTML='<p class="header">What is This?</p><p class="answer">WeevilScout is an initiative to solve complex problems using a global network of browsers.</p><br/>					   <p class="header">How Does it Work?</p><p class="answer">When you click the start button your browser will be connected to a cluster of browsers. Once connected your browser can start computing tasks which are sent to it by WeevilScout server.</p><br/><p class="header">News</p><p class="answer">None</p>';l.appendChild(k);h.style.top=m+"px";h.style.left=o+"px";h.style.width="500px";h.style.height="370px";h.style.position="absolute";h.innerHTML='<p class="header">Privacy Concern?</p><p class="answer">For sake of illustrating the cluster on Google maps you will be asked to share your location this is only used to show the distribution of the cluster on a global scale. A random user id is generated when you connect to the network so no lenghty registration procedures are required.</p><br/>					   <p class="header">Agreement</p><p class="answer">By clicking on the START button you are joining the WeevilScout network at you OWN risk and agree that your browser and therfore your computer will be used to execute JavaScript programs sent to it. </p>';l.appendChild(h);l.appendChild(q);b.setAttribute("joinBtn","onclick","onJoinBtnClick()");var r=document.getElementById("joinBtn");r.onmouseover=function(){this.style.cursor="pointer"};r.innerHTML='<img src="images/on.png"/>'});YAHOO.util.Event.addListener("mainTab2","click",f);function f(){YAHOO.util.Event.removeListener("mainTab2","click",f);a.onAvailable("editArea",function(){editAreaLoader.init({id:"editArea",start_highlight:true,allow_resize:"both",allow_toggle:true,word_wrap:true,language:"en",syntax:"js"})})}a.onAvailable("wnetwork",function(){var g=new YAHOO.widget.Layout("wnetwork",{width:b.get("centerChild").offsetWidth-10,height:b.get("centerChild").offsetHeight-b.get("centerChild").firstChild.offsetHeight-10,units:[{position:"bottom",header:"Console",gutter:"0px",height:"100px",resize:true,proxy:false,body:"tab1.bottom",scroll:true,gutter:"5 0 0 0",collapse:true,maxHeight:500,animate:true},{position:"center",body:"tab1.center",width:"100%",gutter:"0 0 0 0",scroll:false}]});g.render();g.getUnitByPosition("bottom").toggle()});a.onAvailable("wedit",function(){var g=new YAHOO.widget.Layout("wedit",{width:b.get("centerChild").offsetWidth-10,height:b.get("centerChild").offsetHeight-b.get("centerChild").firstChild.offsetHeight-10,units:[{position:"bottom",header:"Console",gutter:"0px",height:"100px",resize:true,proxy:false,body:"tab2.bottom",scroll:true,gutter:"5 0 0 0",collapse:true,maxHeight:500,animate:true},{position:"left",header:"Library",gutter:"0px",width:"200px",resize:true,proxy:false,body:"tab2.left",gutter:"0 5 0 0",collapse:true,animate:true},{position:"center",body:"tab2.center",width:"100%",gutter:"0 0 0 0",scroll:false}]});g.render();d();c()})});function d(){var q=new YAHOO.util.Element("tab2.center",{id:"editPanelRoot",});var f=document.createElement("div");f.setAttribute("id","editPanelToolbar");f.style.height="5%";var l=document.createElement("div");l.setAttribute("id","editPanel");l.style.width="98%";l.style.height="87%";document.getElementById("editPanelRoot").appendChild(f);document.getElementById("editPanelRoot").appendChild(l);var m=new YAHOO.widget.Panel("inputPanel",{fixedcenter:true,width:"500px",visible:false,draggable:true,close:true});m.setHeader("Panel #2 from Script &mdash; This Panel Is Draggable");m.setBody('<div id="editPanel2" style="max-height: 400px; overflow:auto"></div>');m.setFooter("End of Panel #2");m.render(document.body);var g=new YAHOO.widget.Panel("submitPanel",{fixedcenter:true,width:"500px",visible:false,draggable:true,close:true});g.setHeader("Submit Weevil");g.setBody('<div id="submitPanel2" style="max-height: 400px; overflow:auto"></div>');g.setFooter("");g.render(document.body);var s=new YAHOO.widget.Button({id:"btn_2",type:"button",label:"Submit",container:"editPanelToolbar",onclick:{fn:n}});b.setStyle("editPanelRoot","width","100%");b.setStyle("editPanelRoot","height","100%");b.setStyle("editPanel","margin","1em");var k=document.createElement("textarea");k.id="editArea";k.style.width="100%";k.style.height="100%";k.innerHTML="/*Write your Weevil here*/ \n\n\nfunction weevil_main(a, b) {\n	return a+b; \n}";document.getElementById("editPanel").appendChild(k);function n(){var z=document.getElementById("submitPanel2");if(z.hasChildNodes()){while(z.childNodes.length>=1){z.removeChild(z.firstChild)}}var A=document.createElement("p");A.innerHTML="Weevil Name: ";var x=document.createElement("textarea");x.id="weevil_name";document.getElementById("submitPanel2").appendChild(A);document.getElementById("submitPanel2").appendChild(x);var w=getFunctionParamList(editAreaLoader.getValue("editArea"));for(i=0;i<w.length;i++){var t=document.createElement("div");var y=document.createElement("div");var u=document.createElement("input");u.id="mult_input"+w[i];u.type="checkbox";u.value="test";u.checked=false;var B=document.createElement("p");B.innerHTML="Multiple Inputs ";t.innerHTML="<p>Value for parameter: "+w[i]+"</p>";y.innerHTML='<textarea id="input'+w[i]+'"></textarea>';document.getElementById("submitPanel2").appendChild(t);document.getElementById("submitPanel2").appendChild(y)}document.getElementById("submitPanel2").appendChild(document.createElement("div"));var C=new YAHOO.widget.Button({id:"btn_5",type:"button",label:"Submit",container:"submitPanel2",onclick:{fn:v}});g.show();function v(){var E="<weevil>\n";E=E+"<name>"+trim(document.getElementById("weevil_name").value)+"</name>\n";E=E+p();E=E+"<source>";var D=editAreaLoader.getValue("editArea");D=D.replace(/&/g,"&amp;");D=D.replace(/</g,"&lt;");D=D.replace(/>/g,"&gt;");D=D.replace(/"/g,"&quot;");D=D.replace(/'/g,"&apos;");E=E+D;E=E+"</source>\n</weevil>";enqueueWeevil(E);g.hide()}}function h(){m.show();var t=document.getElementById("editPanel2");if(!t.hasChildNodes()){}}function p(){var u=getFunctionParamList(editAreaLoader.getValue("editArea"));var v="<parameters>\n";for(i=0;i<u.length;i++){var w=document.getElementById("input"+u[i]);var x=document.getElementById("mult_input"+u[i]);w.value=trim(w.value);if(w.value){var y=w.value.split(/\r\n|\r|\n/);var t="";for(j=0;j<y.length;j++){t=t+"<"+u[i]+"."+j+">"+y[j]+"</"+u[i]+"."+j+">\n"}v=v+"<"+u[i]+" >\n"+t+"</"+u[i]+">\n"}else{v=v+"<"+u[i]+"><"+u[i]+".0>null</"+u[i]+".0></"+u[i]+">\n"}}v=v+"</parameters>\n";return v}function r(){var t=document.getElementById("editPanel2");if(t.hasChildNodes()){while(t.childNodes.length>=1){t.removeChild(t.firstChild)}}var u=getFunctionParamList(editAreaLoader.getValue("editArea"));for(i=0;i<u.length;i++){var x=document.createElement("div");var w=document.createElement("div");x.innerHTML="<p>Value for parameter: "+u[i]+"</p>";w.innerHTML='<textarea id="input'+u[i]+'"></textarea>';document.getElementById("editPanel2").appendChild(x);document.getElementById("editPanel2").appendChild(w)}var v=new YAHOO.widget.Button({id:"btn_4",type:"button",label:"Refresh",container:"editPanel2",onclick:{fn:r}})}function o(){removeElementById("tmp_script");var z=document.getElementsByTagName("HEAD").item(0);var u=document.createElement("script");u.setAttribute("id","tmp_script");u.type="text/javascript";u.text=editAreaLoader.getValue("editArea");z.appendChild(u);var A=getFunctionParamList(editAreaLoader.getValue("editArea"));var w=[];var x="(";var t=/[\D+]/;for(i=0;i<A.length;i++){var y=document.getElementById("input"+A[i]);if(y.value){if(y.value.match(t)){w[i]=y.value}else{w[i]=parseInt(y.value)}x=x+y.value+","}else{w[i]=null;x=x+"null,"}}x=x.substr(0,x.length-1);x=x+")";debug("tab2.bottom","Validating weevil_main"+x);var B;try{B=window.weevil_main.apply(this,w)}catch(v){debug("tab2.bottom","Validation Error: "+v.message);B=null}if(B!=null){debug("tab2.bottom","Result:"+B);debug("tab2.bottom","Validation OK")}}}function c(){var f=new YAHOO.util.Element("tab2.left",{id:"editNavPanel",});b.setStyle("editNavPanel","width","100%");b.setStyle("editNavPanel","height","100%");b.setStyle("editNavPanel","padding","2px")}a.onAvailable("editNavPanel",function(){tree=new YAHOO.widget.TreeView("editNavPanel");var f=getWeevilList();var g=f.getElementsByTagName("weevil");for(i=0;i<g.length;i++){var h=new YAHOO.widget.MenuNode(g[i].childNodes[0].nodeValue,tree.getRoot(),false)}tree.subscribe("labelClick",function(l){var k=GetHttpRequest();k.open("GET","weevils/"+l.label+"/"+l.label+".js",true);k.onreadystatechange=function(){if(k.readyState!=4){return}editAreaLoader.setValue("editArea",k.responseText)};k.send(null)});tree.draw()});a.onAvailable("tab1.center",function(){var g=document.getElementById("tab1.center");var f=document.createElement("div");f.setAttribute("id","content");f.setAttribute("class","googlemap");g.appendChild(f);joinWeevilNetwork()});a.onAvailable("tab1.left",function(){});e.render();a.on(window,"resize",e.resize,e,true)}})})();function onJoinBtnClick(){var c=document.getElementById("joinBtn").parentNode;if(c.hasChildNodes()){while(c.childNodes.length>=1){c.removeChild(c.firstChild)}}var e=document.createElement("div");e.id="centerChild";e.style.height="100%";e.style.width="100%";c.appendChild(e);var a=new YAHOO.widget.TabView("centerChild");a.addTab(new YAHOO.widget.Tab({label:"Weevil Network",content:'<div id="wnetwork"><div id="tab1.center"/><div id="tab1.left"/><div id="tab1.bottom"/></div>',active:true}));a.addTab(new YAHOO.widget.Tab({label:"Submit a Weevil",id:"mainTab2",content:'<div id="wedit"><div id="tab2.center"/><div id="tab2.left"/><div id="tab2.bottom"/></div>',}));a.addTab(new YAHOO.widget.Tab({label:"My Weevils",content:'<div id="myweevils"><div id="tab3.center" style="overflow:auto;height:100%;width:100%"/><div id="tab3.left"/><div id="tab3.bottom"/></div>'}));var b=Dom.get("centerChild").offsetWidth-20;var d=Dom.get("centerChild").offsetHeight-Dom.get("centerChild").firstChild.offsetHeight-10;Dom.setStyle("tab3.center","width",b+"px");Dom.setStyle("tab3.center","height",d+"px");a.addTab(new YAHOO.widget.Tab({label:"Quick How To",content:'<iframe id="tab4.center" src="http://elab.lab.uvalight.net/~weevil/help/weevilhelp.html"></iframe>'}));Dom.setStyle("tab4.center","width",b+"px");Dom.setStyle("tab4.center","height",d+"px")};